(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[18],{109:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a.n(n),c=a(26),s=a(12),i=a(13),l=a(15),o=a(14),u=a(0),h=a.n(u),m=a(20),d=a(17),p=a(9),f=a(21),v=a(131),y=a(37),k=a(36),g=f.a.setLocalStorage,E=f.a.getLocalStorage,b=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={hotSearch:[],msg:"",historyList:[],value:"",searchList:[],keyword:"",searchDetailList:[]},n.handleChange=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({value:t.target.value}),t.target.value.match(/^[ ]*$/)){e.next=6;break}return e.next=4,Object(m.n)(t.target.value);case 4:a=e.sent,n.setState({searchList:a.data.result.allMatch||[]});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleClickTo=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var c,s,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.t)(t.id);case 2:c=e.sent,s=n.state.searchDetailList.map((function(e){return{name:e.name,id:e.id,picUrl:e.artists[0].img1v1Url,ar:e.artists,al:e.album}})),i={name:t.name,id:t.id,picUrl:t.artists[0].img1v1Url,ar:t.artists,al:t.album,url:c.data.data[0].url},-1===(l=E("hot_history")||[]).indexOf(t.name)&&(l.push(t.name),g("hot_history",l)),g("player",i),g("playerList",s),g("playerIndex",a),n.props.getMenusData(i),n.props.getPlayerList(s),n.props.getPlayerIndex(a),n.props.getIsPlay(!0),n.props.history.push("/player");case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleClick=function(e,t){var a=0;return function(){var n=new Date;if(n-a>=t){a=new Date;for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];e.call.apply(e,[this].concat(c))}}}(n.handleClick,2e3),n}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.getDataHot()}},{key:"getDataHot",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.m)();case 2:t=e.sent,this.setState({hotSearch:t.data.data,historyList:E("hot_history")});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(e){var t=this,a=E("hot_history")||[];-1===a.indexOf(e.searchWord)&&(a.push(e.searchWord),g("hot_history",a)),this.setState({msg:"\u641c\u7d22\u6210\u529f",historyList:E("hot_history")},(function(){t.promptRef.handlePromptToggle()})),this.searchItemClick(e.searchWord)}},{key:"searchItemClick",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({keyword:t,value:""}),e.next=3,Object(m.l)(t,15);case 3:a=e.sent,this.setState({searchDetailList:a.data.result.songs});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.hotSearch,n=t.msg,r=t.historyList,c=t.value,s=t.searchList,i=t.keyword,l=t.searchDetailList;return a.length?h.a.createElement("div",{className:"search"},h.a.createElement(v.a,{height:50},h.a.createElement("header",{className:"header"},h.a.createElement("i",{className:"iconfont icon-jiantouzuo",onClick:function(){return e.props.history.push("/")}}),h.a.createElement("div",{className:"search"},h.a.createElement("input",{type:"text",placeholder:"\u641c\u7d22",value:c,onChange:this.handleChange})),h.a.createElement("i",{className:"iconfont icon-iconset0203"})),h.a.createElement("ul",{className:"search_song_list",style:{display:c?"block":"none"}},s.map((function(t){return h.a.createElement("li",{key:t.keyword,onClick:function(){return e.searchItemClick(t.keyword)}},h.a.createElement("i",{className:"iconfont icon-search"}),h.a.createElement("span",null,t.keyword))})))),i?h.a.createElement("ul",{className:"search_list"},l.map((function(t,a){return h.a.createElement("li",{key:a},h.a.createElement("i",{className:"iconfont icon-jiantouzuo",onClick:function(){e.setState({keyword:""})}}),h.a.createElement("div",{className:"song",onClick:function(){return e.handleClickTo(t,a)}},h.a.createElement("p",null,t.name),h.a.createElement("p",null,t.artists[0].name," ~ ",t.album.name)),h.a.createElement("i",{className:"iconfont icon-bofang"}))}))):h.a.createElement(u.Fragment,null,h.a.createElement("section",{className:"history"},h.a.createElement("h3",null,"\u5386\u53f2\u8bb0\u5f55"),(r||[]).length?h.a.createElement(u.Fragment,null,r.map((function(t){return h.a.createElement("span",{key:t,className:"tag",onClick:function(){return e.searchItemClick(t)}},t)}))):h.a.createElement("p",{className:"not"},"\u6682\u65e0\u641c\u7d22\u8bb0\u5f55...")),h.a.createElement("section",{className:"most"},h.a.createElement("h3",null,"\u70ed\u641c\u699c"),h.a.createElement("ul",{className:"most_list"},a.map((function(t,a){return h.a.createElement("li",{key:a,onClick:function(){return e.handleClick(t)}},h.a.createElement("div",{className:"info"},h.a.createElement("span",{className:a<=3?"activateIndex order":"order"},(n=a+1)>=10?n:"0"+n),h.a.createElement("div",{className:"song"},h.a.createElement("div",{className:a<=3?"activateTitle song_title":"song_title"},t.searchWord,t.iconUrl&&h.a.createElement("img",{src:t.iconUrl,alt:"hot"})),h.a.createElement("p",null,t.content))),h.a.createElement("span",null,t.score));var n}))))),h.a.createElement(y.a,{msg:n,ref:function(t){return e.promptRef=t}})):h.a.createElement(k.a,null)}}]),a}(u.Component);t.default=Object(d.b)(null,{getMenusData:p.f,getPlayerList:p.k,getPlayerIndex:p.j,getIsPlay:p.e})(b)},131:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(12),r=a(13),c=a(15),s=a(14),i=a(0),l=a.n(i),o=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).setFixed=function(){var e=document.documentElement.scrollTop,t=r.headerRef.current;e>0?(r.headerAntiShake.current.style.height=r.props.height+"px",t.classList.add("header_fixed")):(t.classList.remove("header_fixed"),r.headerAntiShake.current.style.height=null)},r.headerRef=Object(i.createRef)(),r.headerAntiShake=Object(i.createRef)(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.setFixed)}},{key:"render",value:function(){return l.a.createElement("div",{ref:this.headerAntiShake},l.a.createElement("section",{className:"",ref:this.headerRef},this.props.children))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.setFixed)}}]),a}(i.Component)}}]);
//# sourceMappingURL=18.c7f5922c.chunk.js.map