{"version":3,"sources":["views/SongSheet/SongSheet.js","component/common/LazyLoading.js","static/images/loading-error.svg","static/images/loading.svg","../../../../../webpack/universalModuleDefinition","../../../../../webpack/bootstrap","../../../../../src/tuil.js","../../../../../src/index.js","../webpack:/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","../../../../../src/lazy.js","../../../../../src/listener.js","component/common/ScrollHeader.js","component/content/RemoSongItem.js","../node_modules/js-num-format/index.js","component/content/ScrollTag.js","utils/sessionStorage.js"],"names":["setSessionStorage","sessionStorage","getSessionStorage","SongSheet","state","tagsHot","tag","handpickList","handleChangeTag","item","setState","getSongHandpickData","name","this","getData","getSongHot","result","data","tags","map","getSongHandpick","playlists","picUrl","coverImgUrl","id","playCount","length","className","height","onClick","props","history","push","tagList","tagIndex","index","key","to","color","Component","LazyLoading","config","options","error","require","loading","throttleWait","src","module","exports","window","i","l","modules","__webpack_require__","Object","enumerable","value","bind","inBrowser","style","el","prop","getComputedStyle","getPropertyValue","overflow","e","eventRegister","on","type","func","capture","support","opts","defineProperty","get","addEventListener","passive","off","removeEventListener","throttle","action","delay","timeout","lastRun","context","args","arguments","runCallback","Date","now","apply","setTimeout","remove","arr","indexOf","splice","scrollParent","HTMLElement","parent","document","body","documentElement","parentNode","test","loadImageAsync","resolve","reject","image","Image","onload","naturalHeight","naturalWidth","onerror","_react","lazy","LazyClass","_classCallCheck","componentDidMount","add","_this","refs","lazyImg","backgroundImage","React","createElement","ref","_react2","nextProps","update","DEFAULT_URL","Lazy","defaultOptions","preLoad","listenEvents","ListenerQueue","TargetQueue","lazyLoadHandler","$lazyLoadHandler","some","inintOptions","$parent","listener","Listener","elRenderer","addListenerTarget","$listenerItem","find","updata","removeListenerTarget","$targetItem","t","target","childrenCount","initListener","forEach","start","evt","_this2","status","getAttribute","setAttribute","loaded","checkInView","load","_tuil","imgCache","initStatus","render","oldSrc","rect","getBoundingClientRect","getRect","top","innerHeight","bottom","left","innerWidth","right","ScrollHeader","setFixed","scrollTop","headerDOM","headerRef","current","headerAntiShake","classList","createRef","children","RemoSongItem","numberFormat","k","param","unit","Math","floor","log","pow","toFixed","ScrollTag","handleClickTag","JSON","parse","getItem","setItem","stringify","recommendSessionStorage","removeItem"],"mappings":"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","file":"static/js/8.121dee1c.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { getSongHot, getSongHandpick } from \"../../api/index\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport ScrollHeader from \"../../component/common/ScrollHeader\";\r\nimport RemoSongItem from \"../../component/content/RemoSongItem\";\r\nimport ScrollTag from \"../../component/content/ScrollTag\";\r\nimport Loading from \"../../component/content/Loading\";\r\nimport sessionStorage from \"../../utils/sessionStorage\";\r\nconst { setSessionStorage, getSessionStorage } = sessionStorage;\r\nclass SongSheet extends Component {\r\n  state = {\r\n    tagsHot: [], // 热门歌单类型\r\n    tag: {}, // 记录点击标签的类型内容\r\n    handpickList: [], // 网友精选歌碟歌单数据\r\n  };\r\n  // 同步的去请求数据\r\n  UNSAFE_componentWillMount() {\r\n    this.getData(); // 请求热门歌单分类的数据\r\n  }\r\n  // 请求数据的方法\r\n  async getData() {\r\n    const result = await getSongHot();\r\n    this.setState(\r\n      {\r\n        tagsHot: result.data.tags.map((item) => ({ name: item.name })),\r\n      },\r\n      () => {\r\n        this.setState({\r\n          tag: this.state.tagsHot[0],\r\n        });\r\n        this.getSongHandpickData(\r\n          (getSessionStorage(\"song_tag\") || {}).name || this.state.tag.name\r\n        );\r\n      }\r\n    );\r\n  }\r\n  // 请求网友精选歌碟的歌单数据\r\n  async getSongHandpickData(name) {\r\n    const result = await getSongHandpick(39, name, \"hot\");\r\n    this.setState({\r\n      handpickList: result.data.playlists.map((item) => ({\r\n        // 处理数据\r\n        picUrl: item.coverImgUrl,\r\n        id: item.id,\r\n        name: item.name,\r\n        playCount: item.playCount,\r\n      })),\r\n    });\r\n  }\r\n  // 点击类型\r\n  handleChangeTag = (item) => {\r\n    setSessionStorage(\"song_tag\", item);\r\n    this.setState({\r\n      tag: item,\r\n    });\r\n    this.getSongHandpickData(item.name);\r\n  };\r\n  render() {\r\n    const { tagsHot, handpickList } = this.state;\r\n    if (tagsHot.length) {\r\n      return (\r\n        <div className=\"songSheet\">\r\n          <ScrollHeader height={90}>\r\n            <header className=\"header\">\r\n              <section className=\"left\">\r\n                <i\r\n                  className=\"iconfont icon-jiantouzuo\"\r\n                  onClick={() => this.props.history.push(\"/\")}\r\n                ></i>\r\n                <p>歌单广场</p>\r\n              </section>\r\n            </header>\r\n            <ScrollTag\r\n              tagList={tagsHot}\r\n              handleChangeTag={this.handleChangeTag}\r\n              tagIndex={(getSessionStorage(\"song_tag\") || {}).index}\r\n            />\r\n          </ScrollHeader>\r\n          <section className=\"handpick_list\">\r\n            {handpickList.map((item, index) => (\r\n              <NavLink\r\n                key={index}\r\n                to={`/recommend?id=${item.id}&name=${item.name}`}\r\n              >\r\n                <RemoSongItem item={item} color={\"#000\"} />\r\n              </NavLink>\r\n            ))}\r\n          </section>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <Loading />;\r\n    }\r\n  }\r\n}\r\n\r\nexport default SongSheet;\r\n","import React from 'react'\r\n// 引入图片懒加载的插件\r\nimport Lazyload from \"r-img-lazyload\";\r\n\r\nfunction LazyLoading (props) {\r\n    // 我们使用图片懒加载的目的是缓解首屏加载的压力，优化用户体验\r\n\r\n    // 配置图片懒加载\r\n    const config = {\r\n        // 其他配置项\r\n        options: {\r\n            error: require(\"../../static/images/loading-error.svg\"), // 加载失败后展示的图像\r\n            loading: require(\"../../static/images/loading.svg\"), // 加载中展示的图像\r\n            throttleWait: 1000 // 节流等待时间\r\n        },\r\n        // 图片地址\r\n        src: props.src\r\n    };\r\n    return <Lazyload {...config}/>\r\n}\r\n\r\nexport default LazyLoading\r\n","module.exports = __webpack_public_path__ + \"static/media/loading-error.99e68751.svg\";","module.exports = __webpack_public_path__ + \"static/media/loading.0bab9ee3.svg\";","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\")) : factory(root[\"React\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","// /* eslint-disable*/\nconst inBrowser = typeof window !== 'undefined';\n\nconst style = (el, prop) => (typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop]);\nconst overflow = el => style(el, 'overflow') + style(el, 'overflow-y') + style(el, 'overflow-x');\n\nconst scrollParent = el => {\n    if (!inBrowser) {\n        return false;\n    }\n    if (!(el instanceof HTMLElement)) {\n        return window;\n    }\n    let parent = el;\n    while (parent) {\n        if (parent === document.body || parent === document.documentElement) {\n            break;\n        }\n        if (!parent.parentNode) {\n            break;\n        }\n        if (/(scroll|auto)/.test(overflow(parent))) {\n            return parent;\n        }\n        parent = parent.parentNode;\n    }\n    return window;\n};\nfunction throttle (action, delay) {\n    let timeout = null\n    let lastRun = 0\n    return function () {\n        if (timeout) {\n            return\n        }\n        let elapsed = Date.now() - lastRun\n        let context = this\n        let args = arguments\n        let runCallback = function () {\n                lastRun = Date.now()\n                timeout = false\n                action.apply(context, args)\n            }\n        if (elapsed >= delay) {\n            runCallback()\n        }\n        else {\n            timeout = setTimeout(runCallback, delay)\n        }\n    }\n}\nfunction testSupportsPassive() {\n    if (!inBrowser) {\n        return false;\n    }\n    let support = false;\n    try {\n        const opts = Object.defineProperty({}, 'passive', {\n            get() {\n                support = true;\n            }\n        });\n\n        window.addEventListener('test', null, opts);\n    }\n    catch (e) { }\n    return support;\n}\nconst eventRegister = {\n    on(el, type, func, capture = false) {\n        if (testSupportsPassive()) {\n            el.addEventListener(type, func, {\n                capture,\n                passive: true\n            });\n        }\n        else {\n            el.addEventListener(type, func, capture);\n        }\n    },\n    off(el, type, func, capture = false) {\n        el.removeEventListener(type, func, capture);\n    }\n};\n\nconst loadImageAsync = (item, resolve, reject) => {\n    if (!item.src) {\n        reject('img path is require');\n        return;\n    }\n    const image = new Image();\n    image.src = item.src;\n    image.onload = () => {\n        resolve({\n            naturalHeight: image.naturalHeight,\n            naturalWidth: image.naturalWidth,\n            src: image.src\n        });\n    };\n    image.onerror = e => {\n        reject(e);\n    };\n};\nfunction remove(arr, item) {\n    if (!arr.length) {\n        return;\n    }\n    const index = arr.indexOf(item);\n    if (index > -1) {\n        arr.splice(index, 1);\n    }\n}\nexport {\n    throttle,\n    remove,\n    style,\n    inBrowser,\n    eventRegister,\n    scrollParent,\n    loadImageAsync\n};\n\n","import React, { Component } from 'react';\nimport LazyClass from './lazy';\n\nconst lazy = new LazyClass();\n\nexport default class extends Component {\n    constructor(props) {\n        super(props);\n    }\n    render() {\n        if (this.props.tag) {\n            const Tag = React.createElement(\n                this.props.tag,\n                {\n                    ref: 'lazyImg',\n                    className: this.props.className,\n                    onClick: this.props.onClick\n                }\n            );\n            return Tag;\n        }\n        return <img className={this.props.className} onClick={this.props.onClick} ref=\"lazyImg\" />;\n    }\n    componentDidMount = () => {\n        lazy.add({\n            el: this.refs.lazyImg,\n            src: this.props.src,\n            backgroundImage: !!this.props.tag,\n            options: this.props.options\n        });\n    }\n    shouldComponentUpdate(nextProps) {\n        lazy.update({\n            el: this.refs.lazyImg,\n            src: nextProps.src,\n            backgroundImage: !!nextProps.tag,\n            options: nextProps.options\n        });\n        return true;\n    }\n    componentWillUnmount() {\n        lazy.remove(this.refs.lazyImg);\n    }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import { throttle, eventRegister, scrollParent, inBrowser, remove } from './tuil';\nimport Listener from './listener';\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\nexport default class Lazy {\n    constructor() {\n        this.defaultOptions = {\n            throttleWait: 200,\n            preLoad: 1.3,\n            listenEvents: ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'],\n            error: DEFAULT_URL,\n            loading: DEFAULT_URL\n        };\n        this.ListenerQueue = [];\n        this.TargetQueue = [];\n        this.lazyLoadHandler = throttle(this.$lazyLoadHandler.bind(this), this.defaultOptions.throttleWait);\n    }\n    inintOptions(options) {\n        this.defaultOptions = {\n            ...this.defaultOptions,\n            ...options\n        };\n    }\n    add({\n        el, src, backgroundImage, options = {}\n    }) {\n        if (this.ListenerQueue.some(item => item.el === el)) {\n            this.update({\n                el,\n                src,\n                backgroundImage,\n                options\n            });\n            return;\n        }\n        this.inintOptions(options);\n        const $parent = scrollParent(el);\n        const listener = new Listener({\n            el,\n            src,\n            $parent,\n            elRenderer: this.elRenderer,\n            options: {\n                ...this.defaultOptions,\n                backgroundImage\n            }\n        });\n        this.ListenerQueue.push(listener);\n\n        if (inBrowser) {\n            this.addListenerTarget(window);\n            this.addListenerTarget($parent);\n        }\n        this.lazyLoadHandler();\n    }\n    update({\n        el, src, backgroundImage, options = {}\n    }) {\n        const $listenerItem = this.ListenerQueue.find(item => item.el === el);\n        this.inintOptions(options);\n        $listenerItem && $listenerItem.updata({\n            src,\n            options: {\n                ...this.defaultOptions,\n                backgroundImage\n            }\n        });\n        this.lazyLoadHandler();\n    }\n    remove(el) {\n        if (!el) {\n            return;\n        }\n        const $listenerItem = this.ListenerQueue.find(item => item.el === el);\n        if ($listenerItem) {\n            this.removeListenerTarget($listenerItem.$parent);\n            this.removeListenerTarget(window);\n            remove(this.ListenerQueue, $listenerItem);\n        }\n    }\n    addListenerTarget(el) {\n        let $targetItem = this.TargetQueue.find(target => target.el === el);\n        if (!$targetItem) {\n            $targetItem = {\n                el,\n                childrenCount: 1\n            };\n            this.initListener($targetItem.el, true);\n            this.TargetQueue.push($targetItem);\n        }\n        else {\n            ++$targetItem.childrenCount;\n        }\n    }\n    removeListenerTarget(el) {\n        this.TargetQueue.forEach((target, index) => {\n            if (target.el === el) {\n                --target.childrenCount;\n                if (!target.childrenCount) {\n                    this.initListener(target.el, false);\n                    this.TargetQueue.splice(index, 1);\n                    target = null;\n                }\n            }\n        });\n    }\n    initListener(el, start) {\n        this.defaultOptions.listenEvents.forEach(evt => {\n            eventRegister[start ? 'on' : 'off'](el, evt, this.lazyLoadHandler);\n        });\n    }\n    elRenderer(listener, status) {\n        const { el } = listener;\n        let src;\n        switch (status) {\n            case 'loading':\n                src = listener.loading;\n                break;\n            case 'error':\n                src = listener.error;\n                break;\n            default:\n                src = listener.src;\n                break;\n        }\n        if (listener.options.backgroundImage) {\n            el.style.backgroundImage = `url(${src})`;\n        }\n        else if (el.getAttribute('src') !== src) {\n            el.setAttribute('src', src);\n        }\n        el.setAttribute('lazy', status);\n    }\n    $lazyLoadHandler() {\n        this.ListenerQueue.forEach(listener => {\n            !listener.loaded && listener.checkInView() && listener.load();\n        });\n    }\n}\n","import { loadImageAsync } from './tuil';\n\nlet imgCache = {}\nexport default class Listener {\n    constructor({\n        el, src, $parent, elRenderer, options\n    }) {\n        this.el = el;\n        this.src = src;\n        this.error = options.error;\n        this.loading = options.loading;\n        this.$parent = $parent;\n        this.options = options;\n        this.elRenderer = elRenderer;\n\n        this.initStatus();\n        this.render('loading');\n    }\n    initStatus() {\n        this.status = {\n            error: false,\n            loaded: false\n        };\n    }\n    load() {\n        if (this.status.error) {\n            return;\n        }\n        if (this.status.loaded || imgCache[this.src]) {\n            this.render('loaded');\n        }\n        loadImageAsync({\n            src: this.src\n        }, () => {\n            this.status.loaded = true;\n            this.status.error = false;\n            this.render('loaded');\n            imgCache[this.src] = true;\n        }, e => {\n            this.status.loaded = false;\n            this.status.error = true;\n            this.render('error');\n        });\n    }\n    updata({\n        src, options\n    }) {\n        const oldSrc = this.src;\n        this.src = src;\n        this.loading = options.loading;\n        this.error = options.error;\n        this.options = options;\n        if (oldSrc !== this.src) {\n            this.initStatus();\n        }\n    }\n    render(status) {\n        this.elRenderer(this, status);\n    }\n    getRect() {\n        this.rect = this.el.getBoundingClientRect();\n    }\n    checkInView() {\n        this.getRect();\n        return (this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > 0) &&\n            (this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0);\n    }\n}\n","import React, { Component, createRef } from 'react'\r\n// 处理头部固定定位的时候 抖动问题的组件\r\n// 启动fixed定位的时候 我们要有一个节点来进行防抖(设置高)，否则会有抖动的问题\r\nexport default class ScrollHeader extends Component {\r\n    constructor (props) {\r\n        super(props)\r\n        // ref标记头部的节点\r\n        this.headerRef = createRef()\r\n        // ref标记头部节点的防抖层\r\n        this.headerAntiShake = createRef()\r\n    }\r\n    componentDidMount () {\r\n        window.addEventListener('scroll', this.setFixed)\r\n    }\r\n    // 设置头部是否可以为fixed定位进行展示\r\n    setFixed = () => {\r\n        /* \r\n            props参数\r\n                height：固定防抖层的高度\r\n        */\r\n        const scrollTop = document.documentElement.scrollTop\r\n        const headerDOM = this.headerRef.current\r\n        if (scrollTop > 0) {\r\n            this.headerAntiShake.current.style.height = this.props.height + 'px'\r\n            headerDOM.classList.add('header_fixed')\r\n        } else {\r\n            headerDOM.classList.remove('header_fixed')\r\n            this.headerAntiShake.current.style.height = null\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div ref={this.headerAntiShake}>\r\n                <section className=\"\" ref={this.headerRef}>\r\n                    {this.props.children}\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n    // 组件销毁的时候清除定时器\r\n    componentWillUnmount () {\r\n        window.removeEventListener('scroll', this.setFixed)\r\n    }\r\n}\r\n","import React from 'react'\r\nimport {numberFormat} from 'js-num-format'\r\nimport Lazyload from '../common/LazyLoading'\r\n\r\nconst RemoSongItem = props => {\r\n    const {item,color} = props\r\n    return (\r\n        <div className=\"song_item\" key={item.id}>\r\n            <div className=\"info\">\r\n                <Lazyload src={item.picUrl}/>\r\n                <p>\r\n                    <i className=\"iconfont icon-bofangsanjiaoxing\" style={{color}}></i>\r\n                    <span>{numberFormat(item.playCount)}</span>\r\n                </p>\r\n            </div>\r\n            <p>{item.name}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RemoSongItem\r\n","export const numberFormat = function (value) {\r\n\tconst k = 10000\r\n\tconst sizes = ['', '万', '亿', '万亿']\r\n\tlet i\r\n\tlet param = {}\r\n\tif(value < k){\r\n\t\tparam.value =value\r\n\t\tparam.unit=''\r\n\t}else{\r\n\t\t// log 方法可返回一个数的自然对数。\r\n\t\ti = Math.floor(Math.log(value) / Math.log(k))\r\n\t\t// pow方法可返回 x 的 y 次幂的值。\r\n\t\tparam.value = ((value / Math.pow(k, i))).toFixed(2)\r\n\t\tparam.unit = sizes[i];\r\n\t}\r\n\treturn param.value + param.unit\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nclass ScrollTag extends Component {\r\n    state = {\r\n        tagIndex:  this.props.tagIndex || 0, // 记录初始点击了第几个标签\r\n    }\r\n    handleClickTag = (item, index) => {\r\n        this.setState({\r\n            tagIndex: index\r\n        })\r\n        this.props.handleChangeTag({...item, index})\r\n    }\r\n    render() {\r\n        const {tagList} = this.props\r\n        const {tagIndex} = this.state\r\n        /*\r\n        *   props 参数\r\n        *       handleChangeTag：点击标签触发的事件处理函数(必须)\r\n        *       tagList：数据源(必须)\r\n        *       tagIndex：当前点击的index索引值(可选)\r\n        * */\r\n        return (\r\n            <nav className=\"nav_list\">\r\n                <div className=\"nav_list_scroll\">\r\n                    {\r\n                        tagList.map((item, index) => (\r\n                            <section\r\n                                className={index === tagIndex ? 'activate' : null}\r\n                                key={index}\r\n                                onClick={() => this.handleClickTag(item,index)}\r\n                            >\r\n                                <p>{item.name}</p>\r\n                            </section>\r\n                        ))\r\n                    }\r\n                </div>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ScrollTag;\r\n","// 本文件是操作本地存储数据的sessionStorage\r\n\r\nexport default {\r\n    getSessionStorage (name) { // 获取\r\n        return JSON.parse(sessionStorage.getItem(name))\r\n    },\r\n    setSessionStorage (name, data) { // 设置\r\n        sessionStorage.setItem(name, JSON.stringify(data))\r\n    },\r\n    recommendSessionStorage (name) { // 删除\r\n        sessionStorage.removeItem(name)\r\n    }\r\n}\r\n"],"sourceRoot":""}