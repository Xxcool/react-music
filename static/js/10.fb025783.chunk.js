(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[10],{107:function(e,t,n){"use strict";n.r(t);var r=n(19),a=n.n(r),o=n(22),i=n(26),s=n(12),l=n(13),u=n(15),c=n(14),f=n(0),d=n.n(f),p=n(20),h=n(17),m=n(9),v=/^1[3456789]\d{9}$/,g=n(37),y=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).handleLogin=Object(i.a)(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.phoneRef.current.value,n=r.passwordRef.current.value,!v.test(t)||!n){e.next=9;break}return e.next=5,Object(p.h)(t,n);case 5:502===(o=e.sent).data.code?r.promptRef.handlePromptToggle():r.props.handleChangeLogin(o),e.next=10;break;case 9:r.promptRef.handlePromptToggle();case 10:case"end":return e.stop()}}),e)}))),r.phoneRef=Object(f.createRef)(),r.passwordRef=Object(f.createRef)(),r}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("section",{className:"login"},d.a.createElement("h3",{className:"title"},"\u767b\u9646"),d.a.createElement("div",null,d.a.createElement("span",null,"\u624b\u673a\u53f7"),d.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",ref:this.phoneRef})),d.a.createElement("div",null,d.a.createElement("span",null,"\u5bc6\u7801"),d.a.createElement("input",{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",ref:this.passwordRef})),d.a.createElement("button",{onClick:this.handleLogin},"\u767b\u9646")),d.a.createElement(g.a,{msg:"\u767b\u9646\u5931\u8d25",ref:function(t){return e.promptRef=t}}))}}]),n}(f.Component),b=n(150),w=n(126),E=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={userSong:[],followList:[]},e.handleOut=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.v)();case 2:e.props.getIsLogin({});case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.getUserData()}},{key:"getUserData",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.userId,e.next=3,Object(p.x)(t);case 3:return n=e.sent,e.next=6,Object(p.u)(t);case 6:r=e.sent,this.setState({userSong:n.data.playlist.map((function(e){return{playCount:e.playCount,id:e.id,name:e.name,picUrl:e.coverImgUrl}})),followList:r.data.follow});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.loginStatus,t=this.state,n=t.userSong,r=t.followList;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"my_user"},d.a.createElement("div",{className:"my_user_delete"},d.a.createElement("img",{src:e.avatarUrl,alt:e.nickname,className:"avatar"}),d.a.createElement("p",{className:"user_nickname"},e.nickname),d.a.createElement("p",{className:"user_size"},d.a.createElement("span",null,"\u5173\u6ce8\uff1a",e.follows),"|",d.a.createElement("span",null,"\u7c89\u4e1d\uff1a",e.followeds)),d.a.createElement("p",{className:"level"},"Lv.",e.playlistCount))),d.a.createElement("div",{className:"discover_song"},d.a.createElement("header",{className:"discover_song_head"},d.a.createElement("h3",null,"\u7528\u6237\u6b4c\u5355")),d.a.createElement(b.a,{recommend:n})),d.a.createElement("section",{className:"follow"},d.a.createElement("h3",null,e.nickname,"\u7684\u5173\u6ce8"),d.a.createElement("ul",null,r.map((function(e){return d.a.createElement("li",{key:e.py},d.a.createElement(w.a,{src:e.avatarUrl}),d.a.createElement("div",{className:"info"},d.a.createElement("h4",null,e.nickname),d.a.createElement("p",{className:"text"},e.signature||"\u6682\u65e0"),d.a.createElement("section",null,d.a.createElement("span",null,"\u6b4c\u5355:",e.playlistCount),d.a.createElement("span",{style:{margin:"0 .1rem"}},"|"),d.a.createElement("span",null,"\u7c89\u4e1d:",e.followeds))))})))),d.a.createElement("button",{className:"out",onClick:this.handleOut},"\u9000\u51fa\u767b\u9646"))}}]),n}(f.Component),O=Object(h.b)((function(e){return{loginStatus:e.loginStatus}}),{getIsLogin:m.d})(E),k=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).handleChangeLogin=function(){var t=Object(i.a)(a.a.mark((function t(n){var r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.i)();case 2:r=t.sent,i=n.data.profile,e.props.getIsLogin(Object(o.a)(Object(o.a)({},r.data.profile),{},{follows:i.follows,followeds:i.followeds,playlistCount:i.playlistCount}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.loginStatus;return d.a.createElement("div",{className:"my",style:{minHeight:Object.keys(e).length?"87vh":"92.5vh"}},Object.keys(e).length?d.a.createElement(O,{userId:e.userId}):d.a.createElement(y,{handleChangeLogin:this.handleChangeLogin}))}}]),n}(f.Component);t.default=Object(h.b)((function(e){return{loginStatus:e.loginStatus}}),{getIsLogin:m.d})(k)},126:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(129),i=n.n(o);t.a=function(e){var t={options:{error:n(127),loading:n(128),throttleWait:1e3},src:e.src};return a.a.createElement(i.a,t)}},127:function(e,t,n){e.exports=n.p+"static/media/loading-error.99e68751.svg"},128:function(e,t,n){e.exports=n.p+"static/media/loading.0bab9ee3.svg"},129:function(e,t,n){var r;window,e.exports=(r=n(0),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window,a=function(e,t){return"undefined"!=typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style[t]},o=function(e){return a(e,"overflow")+a(e,"overflow-y")+a(e,"overflow-x")},i={on:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(){if(!r)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}()?e.addEventListener(t,n,a):e.addEventListener(t,n,{capture:a,passive:!0})},off:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.removeEventListener(t,n,r)}};t.throttle=function(e,t){var n=null,r=0;return function(){if(!n){var a=this,o=arguments,i=function(){r=Date.now(),n=!1,e.apply(a,o)};Date.now()-r>=t?i():n=setTimeout(i,t)}}},t.remove=function(e,t){if(e.length){var n=e.indexOf(t);n>-1&&e.splice(n,1)}},t.style=a,t.inBrowser=r,t.eventRegister=i,t.scrollParent=function(e){if(!r)return!1;if(!(e instanceof HTMLElement))return window;for(var t=e;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(o(t)))return t;t=t.parentNode}return window},t.loadImageAsync=function(e,t,n){if(e.src){var r=new Image;r.src=e.src,r.onload=function(){t({naturalHeight:r.naturalHeight,naturalWidth:r.naturalWidth,src:r.src})},r.onerror=function(e){n(e)}}else n("img path is require")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),o=i(a);function i(e){return e&&e.__esModule?e:{default:e}}var s=new(i(n(3)).default),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){s.add({el:n.refs.lazyImg,src:n.props.src,backgroundImage:!!n.props.tag,options:n.props.options})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){return this.props.tag?o.default.createElement(this.props.tag,{ref:"lazyImg",className:this.props.className,onClick:this.props.onClick}):o.default.createElement("img",{className:this.props.className,onClick:this.props.onClick,ref:"lazyImg"})}},{key:"shouldComponentUpdate",value:function(e){return s.update({el:this.refs.lazyImg,src:e.src,backgroundImage:!!e.tag,options:e.options}),!0}},{key:"componentWillUnmount",value:function(){s.remove(this.refs.lazyImg)}}]),t}();t.default=l},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultOptions={throttleWait:200,preLoad:1.3,listenEvents:["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],error:s,loading:s},this.ListenerQueue=[],this.TargetQueue=[],this.lazyLoadHandler=(0,o.throttle)(this.$lazyLoadHandler.bind(this),this.defaultOptions.throttleWait)}return a(e,[{key:"inintOptions",value:function(e){this.defaultOptions=r({},this.defaultOptions,e)}},{key:"add",value:function(e){var t=e.el,n=e.src,a=e.backgroundImage,s=e.options,l=void 0===s?{}:s;if(this.ListenerQueue.some((function(e){return e.el===t})))this.update({el:t,src:n,backgroundImage:a,options:l});else{this.inintOptions(l);var u=(0,o.scrollParent)(t),c=new i.default({el:t,src:n,$parent:u,elRenderer:this.elRenderer,options:r({},this.defaultOptions,{backgroundImage:a})});this.ListenerQueue.push(c),o.inBrowser&&(this.addListenerTarget(window),this.addListenerTarget(u)),this.lazyLoadHandler()}}},{key:"update",value:function(e){var t=e.el,n=e.src,a=e.backgroundImage,o=e.options,i=void 0===o?{}:o,s=this.ListenerQueue.find((function(e){return e.el===t}));this.inintOptions(i),s&&s.updata({src:n,options:r({},this.defaultOptions,{backgroundImage:a})}),this.lazyLoadHandler()}},{key:"remove",value:function(e){if(e){var t=this.ListenerQueue.find((function(t){return t.el===e}));t&&(this.removeListenerTarget(t.$parent),this.removeListenerTarget(window),(0,o.remove)(this.ListenerQueue,t))}}},{key:"addListenerTarget",value:function(e){var t=this.TargetQueue.find((function(t){return t.el===e}));t?++t.childrenCount:(t={el:e,childrenCount:1},this.initListener(t.el,!0),this.TargetQueue.push(t))}},{key:"removeListenerTarget",value:function(e){var t=this;this.TargetQueue.forEach((function(n,r){n.el===e&&(--n.childrenCount,n.childrenCount||(t.initListener(n.el,!1),t.TargetQueue.splice(r,1),n=null))}))}},{key:"initListener",value:function(e,t){var n=this;this.defaultOptions.listenEvents.forEach((function(r){o.eventRegister[t?"on":"off"](e,r,n.lazyLoadHandler)}))}},{key:"elRenderer",value:function(e,t){var n=e.el,r=void 0;switch(t){case"loading":r=e.loading;break;case"error":r=e.error;break;default:r=e.src}e.options.backgroundImage?n.style.backgroundImage="url("+r+")":n.getAttribute("src")!==r&&n.setAttribute("src",r),n.setAttribute("lazy",t)}},{key:"$lazyLoadHandler",value:function(){this.ListenerQueue.forEach((function(e){!e.loaded&&e.checkInView()&&e.load()}))}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o={},i=function(){function e(t){var n=t.el,r=t.src,a=t.$parent,o=t.elRenderer,i=t.options;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=n,this.src=r,this.error=i.error,this.loading=i.loading,this.$parent=a,this.options=i,this.elRenderer=o,this.initStatus(),this.render("loading")}return r(e,[{key:"initStatus",value:function(){this.status={error:!1,loaded:!1}}},{key:"load",value:function(){var e=this;this.status.error||((this.status.loaded||o[this.src])&&this.render("loaded"),(0,a.loadImageAsync)({src:this.src},(function(){e.status.loaded=!0,e.status.error=!1,e.render("loaded"),o[e.src]=!0}),(function(t){e.status.loaded=!1,e.status.error=!0,e.render("error")})))}},{key:"updata",value:function(e){var t=e.src,n=e.options,r=this.src;this.src=t,this.loading=n.loading,this.error=n.error,this.options=n,r!==this.src&&this.initStatus()}},{key:"render",value:function(e){this.elRenderer(this,e)}},{key:"getRect",value:function(){this.rect=this.el.getBoundingClientRect()}},{key:"checkInView",value:function(){return this.getRect(),this.rect.top<window.innerHeight*this.options.preLoad&&this.rect.bottom>0&&this.rect.left<window.innerWidth*this.options.preLoad&&this.rect.right>0}}]),e}();t.default=i}]))},134:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(142),i=n(126);t.a=function(e){var t=e.item,n=e.color;return a.a.createElement("div",{className:"song_item",key:t.id},a.a.createElement("div",{className:"info"},a.a.createElement(i.a,{src:t.picUrl}),a.a.createElement("p",null,a.a.createElement("i",{className:"iconfont icon-bofangsanjiaoxing",style:{color:n}}),a.a.createElement("span",null,Object(o.a)(t.playCount)))),a.a.createElement("p",null,t.name))}},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t,n=1e4,r={};return e<n?(r.value=e,r.unit=""):(t=Math.floor(Math.log(e)/Math.log(n)),r.value=(e/Math.pow(n,t)).toFixed(2),r.unit=["","\u4e07","\u4ebf","\u4e07\u4ebf"][t]),r.value+r.unit}},150:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(16),i=n(134);t.a=function(e){var t=e.recommend;return a.a.createElement("section",{className:"song_recommend"},t.map((function(e,t){return a.a.createElement(o.NavLink,{to:"/recommend?id=".concat(e.id,"&name=").concat(e.name),key:t},a.a.createElement(i.a,{item:e,color:"#fff"}))})))}}}]);
//# sourceMappingURL=10.fb025783.chunk.js.map