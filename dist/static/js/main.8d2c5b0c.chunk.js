(this["webpackJsonpreact-music"]=this["webpackJsonpreact-music"]||[]).push([[3],[,,function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"l",(function(){return h}));var r="IDLOGIN",a="GETMENUSIDATA",o="GETISPLAY",c="GETPROGRESS",i="GETCURRENTTIME",u="GETDURATION",l="GETPLARYSTATUS",s="GETPLARYLRYIC",d="GETLYLRYICINDEX",f="GETPLARYELIST",p="GETPLAYERINDEX",m="GETMODENUM",h="GETTHEMENAME"},,,,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"l",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"m",(function(){return g}));var r=n(2),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r.m,data:e}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r.e,data:e}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:r.c,data:e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0%";return{type:r.k,data:e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:r.a,data:e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:r.b,data:e}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:r.i,data:e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:r.h,data:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:r.d,data:e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:r.g,data:e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:r.j,data:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:r.f,data:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return{type:r.l,data:e}}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"k",(function(){return i})),n.d(t,"w",(function(){return u})),n.d(t,"o",(function(){return l})),n.d(t,"p",(function(){return s})),n.d(t,"r",(function(){return d})),n.d(t,"q",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return y})),n.d(t,"l",(function(){return b})),n.d(t,"h",(function(){return E})),n.d(t,"x",(function(){return j})),n.d(t,"i",(function(){return O})),n.d(t,"u",(function(){return P})),n.d(t,"v",(function(){return S})),n.d(t,"A",(function(){return k})),n.d(t,"B",(function(){return T})),n.d(t,"b",(function(){return w})),n.d(t,"z",(function(){return x})),n.d(t,"y",(function(){return N})),n.d(t,"g",(function(){return I})),n.d(t,"t",(function(){return R})),n.d(t,"s",(function(){return L})),n.d(t,"a",(function(){return C}));var r=n(18),a=n.n(r);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return new Promise((function(r,o){("get"===n?a.a.get(e,{params:t}):a.a.post(e,t)).then((function(e){r(e)})).catch((function(e){o(e)}))}))}a.a.defaults.baseURL="http://localhost:8000",a.a.defaults.withCredentials=!0,a.a.interceptors.response.use((function(e){return e}));var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o("/banner?type=".concat(e))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return o("/personalized?limit=".concat(e))},u=function(){return o("/recommend/songs")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u534e\u8bed",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hot",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:39;return o("/top/playlist/highquality?cat=".concat(e,"&limit=").concat(n,"&order=").concat(t))},s=function(e){return o("/playlist/detail?id=".concat(e))},d=function(){return o("/playlist/hot")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:39,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u534e\u8bed",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hot";return o("/top/playlist?limit=".concat(e,"&cat=").concat(t,"&order=").concat(n))},p=function(){return o("/toplist/detail")},m=function(){return o("/dj/banner")},h=function(){return o("/dj/category/recommend")},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return o("/dj/program/toplist/hours?limit=".concat(e))},v=function(){return o("/search/hot/detail")},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mobile";return o("/search/suggest?type=".concat(t,"&keywords=").concat(e))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return o("/search?keywords=".concat(e,"&limit=").concat(t))},E=function(e,t){return o("/login/cellphone?phone=".concat(e,"&password=").concat(t))},j=function(e){return o("/user/playlist?uid=".concat(e))},O=function(){return o("/login/status")},P=function(e){return o("/user/follows?uid=".concat(e))},S=function(){return o("/logout")},k=function(){return o("/video/group/list")},T=function(e){return o("/video/group?id=".concat(e))},w=function(e){return o("/video/url?id=".concat(e))},x=function(e){return o("/video/detail?id=".concat(e))},N=function(e){return o("/comment/video?id=".concat(e))},I=function(e){return o("/check/music?id=".concat(e))},R=function(e){return o("/song/url?id=".concat(e))},L=function(e){return o("/lyric?id=".concat(e))},C=function(){return o("/personalized/newsong")}},function(e,t,n){"use strict";t.a={getLocalStorage:function(e){return JSON.parse(localStorage.getItem(e))},setLocalStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},recommendLocalStorage:function(e){localStorage.removeItem(e)}}},,,,,,,function(e,t,n){"use strict";function r(e,t,n,r){var a={},o={};for(var c in t)a[c]=parseFloat(l(e,c)),o[c]=(t[c]-a[c])/(1e3*n);var i=new Date,u=setInterval((function(){var c=new Date-i;for(var l in t)e.style[l]="opacity"===l?a[l]+o[l]*c:a[l]+o[l]*c+"px";if(c/1e3>=n){for(var s in clearInterval(u),t)e.style[s]="opacity"===s?t[s]:t[s]+"px";r&&r.call(e,a,n)}}),16);function l(e,t){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)[t]}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=function(e){var t=document.body;t.style.overflow=e?"hidden":"inherit"}},,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(){return a.a.createElement("div",{className:"lds-roller"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(12),a=n(13),o=n(15),c=n(14),i=n(0),u=n.n(i),l=n(28),s=n(29),d=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={isPrompt:!1},a.promptRef=Object(i.createRef)(),a}return Object(a.a)(n,[{key:"handlePromptToggle",value:function(){var e=this;this.setState({isPrompt:!0},(function(){Object(s.a)(!0),Object(l.a)(e.promptRef.current,{opacity:1},.5,(function(){Object(l.a)(e.promptRef.current,{opacity:0},.5,(function(){Object(s.a)(!1),e.setState({isPrompt:!1})}))}))}))}},{key:"render",value:function(){var e=this.props.msg,t=void 0===e?"":e,n=this.state.isPrompt;return u.a.createElement("div",{className:"prompt",ref:this.promptRef,style:{display:n?"block":"none"}},t)}}]),n}(i.Component)},,function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v}));var r=n(0),a=n.n(r).a.lazy,o=a((function(){return n.e(17).then(n.bind(null,108))})),c=a((function(){return n.e(18).then(n.bind(null,109))})),i=a((function(){return Promise.all([n.e(0),n.e(11),n.e(14)]).then(n.bind(null,99))})),u=a((function(){return n.e(8).then(n.bind(null,100))})),l=a((function(){return n.e(19).then(n.bind(null,101))})),s=a((function(){return Promise.all([n.e(2),n.e(7)]).then(n.bind(null,102))})),d=a((function(){return Promise.all([n.e(6),n.e(15)]).then(n.bind(null,110))})),f=a((function(){return Promise.all([n.e(16),n.e(13)]).then(n.bind(null,106))})),p=a((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.bind(null,103))})),m=a((function(){return n.e(10).then(n.bind(null,107))})),h=a((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,104))})),g=[{path:"/home",component:o},{path:"/search",component:c},{path:"/recommend",component:i},{path:"/songSheet",component:u},{path:"/rank",component:l},{path:"/dj",component:s},{path:"/videoDetails/:id",component:d},{path:"/player",component:f},{path:"/skin",component:a((function(){return n.e(20).then(n.bind(null,105))}))}],v=[{path:"/",component:p,exact:!0},{path:"/home/discover",component:p},{path:"/home/my",component:m},{path:"/home/video",component:h}]},,,,,,,,,function(e,t,n){"use strict";function r(e){return function(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;r++){var a=decodeURIComponent(t[r]),o=/\[\d*:\d*((\.|:)\d*)*\]/g,c=a.match(o);if(c)for(var i=a.replace(o,""),u=0,l=c.length;u<l;u++){var s=c[u],d=Number(String(s.match(/\[\d*/i)).slice(1)),f=Number(String(s.match(/:\d*/i)).slice(1)),p=60*d+f;""!==i&&n.push({time:p,content:i})}}return n}(e||"")}n.d(t,"a",(function(){return r}))},,,,,,function(e,t,n){e.exports=n(98)},,,,,,,,,,,function(e,t,n){},function(e,t){!function(){function e(){var e=document.querySelector("html"),t=window.screen.width;e.style.fontSize=t/10+"px"}e(),window.addEventListener("resize",e)}()},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(24),c=n.n(o),i=n(16),u=n(17),l=n(10),s=n(50),d=n(2),f=n(21),p=f.a.getLocalStorage,m=n(35),h=n(51),g={key:"root",storage:n.n(h).a,whitelist:["loginStatus"]},v=Object(m.a)(g,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loginStatus:{},player:p("player")||{},isPlay:!1,progress:"0%",currentTime:0,duration:0,isPlayStatus:!1,lyric:[],activateIndex:0,playerList:p("playerList")||[],playerIndex:p("playerIndex")||0,modeNum:0,modeTypeArr:[{icon:"icon-zhongxinshangchuan",msg:"\u987a\u5e8f\u64ad\u653e"},{icon:"icon-suijibofang",msg:"\u968f\u673a\u64ad\u653e"},{icon:"icon-danquxunhuan",msg:"\u5355\u66f2\u5faa\u73af"}],themeName:p("themeName")||{name:"red"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.m:return Object.assign({},e,{loginStatus:t.data});case d.e:return Object.assign({},e,{player:t.data});case d.c:return Object.assign({},e,{isPlay:t.data});case d.k:return Object.assign({},e,{progress:t.data});case d.a:return Object.assign({},e,{currentTime:t.data});case d.b:return Object.assign({},e,{duration:t.data});case d.i:return Object.assign({},e,{isPlayStatus:t.data});case d.h:return Object.assign({},e,{lyric:t.data});case d.d:return Object.assign({},e,{activateIndex:t.data});case d.g:return Object.assign({},e,{playerList:t.data});case d.j:return Object.assign({},e,{playerIndex:t.data});case d.f:return Object.assign({},e,{modeNum:t.data});case d.l:return Object.assign({},e,{themeName:t.data});default:return e}})),y=Object(l.createStore)(v,Object(l.applyMiddleware)(s.a)),b=Object(m.b)(y),E=y,j=n(52),O=(n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(12)),P=n(13),S=n(15),k=n(14),T=n(3),w=n(31),x=n.n(w),N=n(39),I=n(22),R=n(19),L=n.n(R),C=n(26),A=n(9),_=n(20),G=n(37),D=n(48),M=f.a.setLocalStorage,U=f.a.getLocalStorage,z=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).state={msg:""},a.handleClickToggle=function(){var e=a.props,t=e.isPlay,n=e.getIsPlay;t?(n(!1),a.handlePause()):(n(!0),a.handlePlay())},a.handleTimeupdate=function(){var e=a.audioRef.current,t=a.props,n=t.currentTime,r=t.lyric,o=t.getActivateIndex;a.props.getCurrentTime(e.currentTime);var c=100*(e.currentTime/e.duration||0)+"%";a.props.getProgress(c);var i=r.findIndex((function(e,t,r){var a=r[t+1];return e.time<=n&&(!a||n<a.time)?t:0}));o(-1===i?0:i)},a.handleCanPlay=function(){var e=a.props,t=e.getDuration,n=e.isPlay;t(a.audioRef.current.duration),n&&a.handlePlay()},a.handleEonended=Object(C.a)(L.a.mark((function e(){var t,n,r,o,c,i,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.modeNum,r=t.playerList,o=t.playerIndex,c=t.getPlayerIndex,e.t0=n,e.next=0===e.t0?4:1===e.t0?8:2===e.t0?13:24;break;case 4:return i={},o===r.length-1?(c(0),M("playerIndex",0),i=r[0]):(c(o+1),M("playerIndex",o+1),i=r[o+1]),a.modePlayer(i,!1),e.abrupt("break",25);case 8:return u=Math.floor(Math.random()*Math.floor(r.length)),c(u),M("playerIndex",u),a.modePlayer(r[u],!1),e.abrupt("break",25);case 13:return e.prev=13,e.next=16,Object(_.g)(U("player").id);case 16:a.audioRef.current.load(),a.handlePlay(),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),a.setState({msg:"\u8be5\u6b4c\u66f2,\u65e0\u7248\u6743\u6743\u9650"},(function(){a.handlePause(),Object(A.h)([]),M("player",U("player")),a.promptRef.handlePromptToggle()}));case 23:return e.abrupt("break",25);case 24:console.log("default");case 25:case"end":return e.stop()}}),e,null,[[13,20]])}))),a.audioRef=Object(r.createRef)(),a}return Object(P.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){Object.keys(U("player")||[]).length&&this.modePlayer(U("player"),!0)}},{key:"handlePlay",value:function(){var e=this.audioRef.current,t=e.play();void 0!==t&&t.then((function(){e.play()})).catch((function(){}))}},{key:"handlePause",value:function(){var e=this.audioRef.current;e&&e.pause()}},{key:"modePlayer",value:function(){var e=Object(C.a)(L.a.mark((function e(t,n){var r,a,o,c,i,u,l,s,d=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,a=r.getPlayLyric,o=r.getMenusData,e.prev=1,e.next=4,Object(_.g)(t.id);case 4:return e.next=6,Object(_.t)(t.id);case 6:return c=e.sent,e.next=9,Object(_.s)(t.id);case 9:i=e.sent,u=c.data.data[0].url,o(Object(I.a)(Object(I.a)({},t),{},{url:u})),M("player",t),a(Object(D.a)(i.data.lrc.lyric)),u&&!n?((l=this.audioRef.current).load(),void 0!==(s=l.play())&&s.then((function(){l.play()})).catch((function(){}))):n||(this.handlePause(),this.setState({msg:"\u8be5\u6b4c\u66f2,\u65e0\u7248\u6743\u6743\u9650"},(function(){d.handlePause(),a([]),d.promptRef.handlePromptToggle()}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),this.setState({msg:"\u8be5\u6b4c\u66f2,\u65e0\u7248\u6743\u6743\u9650"},(function(){d.handlePause(),a([]),o(Object(I.a)(Object(I.a)({},t),{},{url:null})),M("player",t),d.promptRef.handlePromptToggle()}));case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.player,o=t.location,c=t.progress,u=t.isPlay,l=this.state.msg;return Object.keys(n).length?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"small_player",style:{display:"/player"===o.pathname?"none":"flex"}},a.a.createElement("i",{className:u?"iconfont icon-bofang1":"iconfont icon-kaishi",onClick:this.handleClickToggle}),a.a.createElement(i.NavLink,{to:"/player"},a.a.createElement("img",{src:n.picUrl,alt:n.name})),a.a.createElement("div",{className:"info"},a.a.createElement("div",{className:"msg"},a.a.createElement("div",{className:"text"},a.a.createElement("span",null,n.name)),a.a.createElement("div",{className:"bar"},a.a.createElement("div",{className:"on",style:{width:c}})))),a.a.createElement("audio",{src:n.url,ref:this.audioRef,preload:"metadata",onTimeUpdate:this.handleTimeupdate,onCanPlay:this.handleCanPlay,onEnded:this.handleEonended,className:"player_audio"})),a.a.createElement(G.a,{msg:l,ref:function(t){return e.promptRef=t}})):a.a.createElement(r.Fragment,null)}}]),n}(r.Component),Y=Object(T.o)(Object(u.b)((function(e){return{player:e.player,progress:e.progress,isPlay:e.isPlay,currentTime:e.currentTime,lyric:e.lyric,modeTypeArr:e.modeTypeArr,modeNum:e.modeNum,playerList:e.playerList,playerIndex:e.playerIndex}}),{getIsPlay:A.e,getProgress:A.l,getCurrentTime:A.b,getDuration:A.c,getActivateIndex:A.a,getPlayerIndex:A.j,getMenusData:A.f,getPlayLyric:A.h})(z)),q=n(36),F=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"componentDidMount",value:function(){this.setTheme(this.props.themeName.name)}},{key:"setTheme",value:function(e){document.querySelector("#theme").href="https://xxcool.top/theme/".concat(e,".css")}},{key:"UNSAFE_componentWillUpdate",value:function(e,t,n){var r=e.themeName;r&&this.setTheme(r.name)}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.loginStatus;return a.a.createElement(r.Suspense,{fallback:a.a.createElement(q.a,null)},a.a.createElement("section",{style:{paddingBottom:"/player"!==t.pathname&&Object.keys(n).length?"41px":"0"}},a.a.createElement(w.CacheSwitch,null,N.b.map((function(e){return a.a.createElement(x.a,{key:e.path,path:e.path,component:e.component,when:"always",behavior:function(e){return e?{style:{position:"absolute",zIndex:-9999,opacity:0,visibility:"hidden",pointerEvents:"none"},className:"__CacheRoute__wrapper__cached"}:{className:"__CacheRoute__wrapper__uncached"}},saveScrollPosition:!0})})),a.a.createElement(T.c,{to:"/home/discover"}))),a.a.createElement(Y,null))}}]),n}(r.Component),B=Object(T.o)(Object(u.b)((function(e){return{loginStatus:e.loginStatus,themeName:e.themeName}}))(F));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(i.HashRouter,null,a.a.createElement(u.a,{store:E},a.a.createElement(j.PersistGate,{loading:null,persistor:b},a.a.createElement(B,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[54,4,5]]]);
//# sourceMappingURL=main.8d2c5b0c.chunk.js.map